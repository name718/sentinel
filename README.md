> 🎯 目标：
> **从 0 搭建一个「微前端 · 前端性能 & 工程化实验室」**
> 可用于：**作品集 / 面试 / 技术输出 / 长期迭代**

---

# 一、项目总览（先把“为什么”说清楚）

## 1️⃣ 项目名称（建议）

**Micro Frontend Performance Lab（MFPL）**
中文：**微前端性能与工程化实验室**

---

## 2️⃣ 项目定位（一句话）

> 一个基于微前端架构的实验平台，用于**对比不同前端技术、工程配置和架构策略在真实性能与可维护性上的差异**。

---

## 3️⃣ 你要解决的核心问题

| 问题         | 说明      |
| ---------- | ------- |
| 微前端到底慢不慢？  | 用真实数据回答 |
| 哪些场景适合微前端？ | 给结论     |
| 工程拆分成本在哪？  | 有可视化    |
| 架构选型如何取舍？  | 可对比     |

---

## 4️⃣ 面试官眼里的你

> ❌ “我用过 qiankun”
> ✅ “我做过一个微前端性能实验平台，这是我自己的结论”

---

# 二、整体技术架构（先定大框架）

## 1️⃣ 总体架构图（逻辑）

```
┌─────────────────────────────┐
│        主应用 Shell         │
│  - 路由 / 权限 / 导航        │
│  - 子应用注册与加载          │
│  - 性能 & 监控聚合            │
└───────────┬─────────────────┘
            │
   ┌────────┴─────────┐
   │                  │
┌───────┐        ┌────────┐
│ 子应用A │        │ 子应用B │
│ Vue3   │        │ React  │
│ Vite   │        │ Vite   │
│ 性能实验 │        │ 工程实验 │
└───────┘        └────────┘
```

---

## 2️⃣ 微前端方案选择（明确结论）

### ✅ 推荐：**qiankun**

**原因**

* 生命周期清晰（教学 + 实验友好）
* 沙箱机制成熟
* 社区 & 面试认可度高

> 后期可以加：`micro-app` 做对比（加分项）

---

## 3️⃣ 技术栈总表

### 主应用（Shell）

* Vue 3 + TypeScript
* Vite
* qiankun
* Pinia
* Vue Router
* ECharts

### 子应用

| 子应用        | 技术             | 目的     |
| ---------- | -------------- | ------ |
| 性能实验       | Vue3 + Vite    | 性能对比   |
| 工程实验       | React + Vite   | 技术栈差异  |
| （后期）Legacy | Vue2 + Webpack | 真实遗留系统 |

---

# 三、功能拆解（这是最关键的部分）

## 1️⃣ 主应用（Shell）功能清单

### ① 微前端基座

* 子应用注册
* 生命周期管理
* 路由分发
* 统一 Layout

### ② 性能数据收集

* 首次加载时间
* 子应用 mount 时间
* 资源体积
* Web Vitals（LCP / CLS / INP）

### ③ 数据展示

* 子应用性能对比图
* 时间线
* 配置差异说明

---

## 2️⃣ 子应用 A：性能实验（Vue3）

### 实验 1：首屏加载对比

| 对比项        | 示例             |
| ---------- | -------------- |
| 单体 vs 微前端  | shell 直渲染      |
| 懒加载 vs 预加载 | prefetch       |
| 沙箱开 vs 关   | strict sandbox |

### 实验 2：列表渲染

* 普通列表
* 虚拟列表
* Web Worker 计算

---

## 3️⃣ 子应用 B：工程化实验（React）

### 实验 1：构建体积

* 默认配置
* 拆包优化
* externals

### 实验 2：共享依赖

* 不共享
* externals
* import maps（实验）

---

# 四、从 0 开发的阶段计划（照着走）

---

## 🟢 阶段 0：准备期（1 天）

### 目标

* 技术选型确认
* 仓库结构设计

### 仓库结构（单仓 mono）

```
mfpl/
├── apps/
│   ├── shell/
│   ├── app-vue3-performance/
│   └── app-react-engineering/
├── packages/
│   ├── shared-utils/
│   └── perf-sdk/
└── package.json
```

---

## 🟢 阶段 1：主应用 Shell（3–4 天）

### 必做任务

* Vite + Vue3 初始化
* qiankun 主应用接入
* 注册 2 个子应用
* 路由切换可用

### 验收标准

* 点击导航可加载子应用
* 子应用独立运行 / 被接管都 OK

---

## 🟢 阶段 2：子应用接入（3 天）

### Vue3 子应用

* 配置 qiankun 生命周期
* 支持独立 / 微前端模式
* 基础页面渲染

### React 子应用

* 同上（体现跨技术栈）

---

## 🟢 阶段 3：性能采集 SDK（核心，4–5 天）

### SDK 功能

* 使用 Performance API
* 采集：

  * mount / unmount 时间
  * 资源加载体积
  * Web Vitals

### 数据流

```
子应用 → SDK → window → Shell → Store → 图表
```

---

## 🟢 阶段 4：性能可视化（3 天）

* 对比柱状图
* 时间轴
* 同屏展示 2 个子应用数据

---

## 🟢 阶段 5：实验场景落地（5–7 天）

### 必做实验

* 懒加载 vs 预加载
* 沙箱开关
* 构建体积对比

---

## 🟢 阶段 6：工程化 & 文档（2–3 天）

* README（重点）
* 架构图
* 实验结论总结

---

# 五、你必须写清楚的「实验结论模板」

每个实验都统一格式：

```
实验目的：
实验方案：
数据结果：
结论：
适用场景：
```

👉 这是面试官最爱看的部分

---

# 六、MVP 完成标准（非常重要）

你**只要做到以下几点，就已经是“高级前端作品”**

* [x] 微前端主应用
* [x] 2 个不同技术栈子应用
* [x] 性能数据真实采集
* [x] 至少 3 个对比实验
* [x] 有结论，而不是 Demo

---

# 七、我接下来可以继续帮你的

你现在可以直接选一个，我马上给你**代码级方案**：

1️⃣ **qiankun 主应用 + 子应用初始化代码**
2️⃣ **性能采集 SDK 设计 & 示例代码**
3️⃣ **实验 1：微前端首屏性能对比完整实现**
4️⃣ **README / 项目介绍（直接能发 GitHub）**

你选一个，**我直接给你可复制的第一版实现**。
